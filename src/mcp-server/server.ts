/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";
import { OpalMcpCore } from "../core.js";
import { SDKOptions } from "../lib/config.js";
import type { ConsoleLogger } from "./console-logger.js";
import { createRegisterPrompt } from "./prompts.js";
import {
  createRegisterResource,
  createRegisterResourceTemplate,
} from "./resources.js";
import { MCPScope } from "./scopes.js";
import { createRegisterTool } from "./tools.js";
import { tool$accessRulesCreateAccessRule } from "./tools/accessRulesCreateAccessRule.js";
import { tool$accessRulesGetAccessRule } from "./tools/accessRulesGetAccessRule.js";
import { tool$accessRulesUpdateAccessRule } from "./tools/accessRulesUpdateAccessRule.js";
import { tool$appsGetApp } from "./tools/appsGetApp.js";
import { tool$appsGetApps } from "./tools/appsGetApps.js";
import { tool$appsGetSyncErrors } from "./tools/appsGetSyncErrors.js";
import { tool$bundlesAddBundleGroup } from "./tools/bundlesAddBundleGroup.js";
import { tool$bundlesAddBundleResource } from "./tools/bundlesAddBundleResource.js";
import { tool$bundlesCreateBundle } from "./tools/bundlesCreateBundle.js";
import { tool$bundlesDeleteBundle } from "./tools/bundlesDeleteBundle.js";
import { tool$bundlesGetBundle } from "./tools/bundlesGetBundle.js";
import { tool$bundlesGetBundleGroups } from "./tools/bundlesGetBundleGroups.js";
import { tool$bundlesGetBundleResources } from "./tools/bundlesGetBundleResources.js";
import { tool$bundlesGetBundles } from "./tools/bundlesGetBundles.js";
import { tool$bundlesGetBundleVisibility } from "./tools/bundlesGetBundleVisibility.js";
import { tool$bundlesRemoveBundleGroup } from "./tools/bundlesRemoveBundleGroup.js";
import { tool$bundlesRemoveBundleResource } from "./tools/bundlesRemoveBundleResource.js";
import { tool$bundlesSetBundleVisibility } from "./tools/bundlesSetBundleVisibility.js";
import { tool$bundlesUpdateBundle } from "./tools/bundlesUpdateBundle.js";
import { tool$configurationTemplatesCreateConfigurationTemplate } from "./tools/configurationTemplatesCreateConfigurationTemplate.js";
import { tool$configurationTemplatesDeleteConfigurationTemplate } from "./tools/configurationTemplatesDeleteConfigurationTemplate.js";
import { tool$configurationTemplatesGetConfigurationTemplates } from "./tools/configurationTemplatesGetConfigurationTemplates.js";
import { tool$configurationTemplatesUpdateConfigurationTemplate } from "./tools/configurationTemplatesUpdateConfigurationTemplate.js";
import { tool$eventsEvents } from "./tools/eventsEvents.js";
import { tool$groupBindingsCreateGroupBinding } from "./tools/groupBindingsCreateGroupBinding.js";
import { tool$groupBindingsDeleteGroupBinding } from "./tools/groupBindingsDeleteGroupBinding.js";
import { tool$groupBindingsGetGroupBinding } from "./tools/groupBindingsGetGroupBinding.js";
import { tool$groupBindingsGetGroupBindings } from "./tools/groupBindingsGetGroupBindings.js";
import { tool$groupBindingsUpdateGroupBindings } from "./tools/groupBindingsUpdateGroupBindings.js";
import { tool$groupsAddGroupContainingGroup } from "./tools/groupsAddGroupContainingGroup.js";
import { tool$groupsAddGroupResource } from "./tools/groupsAddGroupResource.js";
import { tool$groupsAddGroupUser } from "./tools/groupsAddGroupUser.js";
import { tool$groupsCreateGroup } from "./tools/groupsCreateGroup.js";
import { tool$groupsDeleteGroup } from "./tools/groupsDeleteGroup.js";
import { tool$groupsDeleteGroupUser } from "./tools/groupsDeleteGroupUser.js";
import { tool$groupsGetGroup } from "./tools/groupsGetGroup.js";
import { tool$groupsGetGroupContainingGroup } from "./tools/groupsGetGroupContainingGroup.js";
import { tool$groupsGetGroupContainingGroups } from "./tools/groupsGetGroupContainingGroups.js";
import { tool$groupsGetGroupMessageChannels } from "./tools/groupsGetGroupMessageChannels.js";
import { tool$groupsGetGroupOnCallSchedules } from "./tools/groupsGetGroupOnCallSchedules.js";
import { tool$groupsGetGroupResources } from "./tools/groupsGetGroupResources.js";
import { tool$groupsGetGroupReviewers } from "./tools/groupsGetGroupReviewers.js";
import { tool$groupsGetGroupReviewerStages } from "./tools/groupsGetGroupReviewerStages.js";
import { tool$groupsGetGroups } from "./tools/groupsGetGroups.js";
import { tool$groupsGetGroupTags } from "./tools/groupsGetGroupTags.js";
import { tool$groupsGetGroupUsers } from "./tools/groupsGetGroupUsers.js";
import { tool$groupsGetGroupVisibility } from "./tools/groupsGetGroupVisibility.js";
import { tool$groupsRemoveGroupContainingGroup } from "./tools/groupsRemoveGroupContainingGroup.js";
import { tool$groupsSetGroupMessageChannels } from "./tools/groupsSetGroupMessageChannels.js";
import { tool$groupsSetGroupOnCallSchedules } from "./tools/groupsSetGroupOnCallSchedules.js";
import { tool$groupsSetGroupResources } from "./tools/groupsSetGroupResources.js";
import { tool$groupsSetGroupReviewers } from "./tools/groupsSetGroupReviewers.js";
import { tool$groupsSetGroupReviewerStages } from "./tools/groupsSetGroupReviewerStages.js";
import { tool$groupsSetGroupVisibility } from "./tools/groupsSetGroupVisibility.js";
import { tool$groupsUpdateGroups } from "./tools/groupsUpdateGroups.js";
import { tool$groupsUpdateGroupUser } from "./tools/groupsUpdateGroupUser.js";
import { tool$idpGroupMappingsDeleteIdpGroupMappings } from "./tools/idpGroupMappingsDeleteIdpGroupMappings.js";
import { tool$idpGroupMappingsGetIdpGroupMappings } from "./tools/idpGroupMappingsGetIdpGroupMappings.js";
import { tool$idpGroupMappingsUpdateIdpGroupMappings } from "./tools/idpGroupMappingsUpdateIdpGroupMappings.js";
import { tool$messageChannelsCreateMessageChannel } from "./tools/messageChannelsCreateMessageChannel.js";
import { tool$messageChannelsGetMessageChannel } from "./tools/messageChannelsGetMessageChannel.js";
import { tool$messageChannelsGetMessageChannels } from "./tools/messageChannelsGetMessageChannels.js";
import { tool$nonHumanIdentitiesGetNhis } from "./tools/nonHumanIdentitiesGetNhis.js";
import { tool$onCallSchedulesCreateOnCallSchedule } from "./tools/onCallSchedulesCreateOnCallSchedule.js";
import { tool$onCallSchedulesGetOnCallSchedule } from "./tools/onCallSchedulesGetOnCallSchedule.js";
import { tool$onCallSchedulesGetOnCallSchedules } from "./tools/onCallSchedulesGetOnCallSchedules.js";
import { tool$ownersCreateOwner } from "./tools/ownersCreateOwner.js";
import { tool$ownersDeleteOwner } from "./tools/ownersDeleteOwner.js";
import { tool$ownersGetOwner } from "./tools/ownersGetOwner.js";
import { tool$ownersGetOwnerFromName } from "./tools/ownersGetOwnerFromName.js";
import { tool$ownersGetOwners } from "./tools/ownersGetOwners.js";
import { tool$ownersGetOwnerUsers } from "./tools/ownersGetOwnerUsers.js";
import { tool$ownersSetOwnerUsers } from "./tools/ownersSetOwnerUsers.js";
import { tool$ownersUpdateOwners } from "./tools/ownersUpdateOwners.js";
import { tool$requestsApproveRequest } from "./tools/requestsApproveRequest.js";
import { tool$requestsCreateRequest } from "./tools/requestsCreateRequest.js";
import { tool$requestsGetRequest } from "./tools/requestsGetRequest.js";
import { tool$requestsGetRequests } from "./tools/requestsGetRequests.js";
import { tool$requestsGetRequestsRelay } from "./tools/requestsGetRequestsRelay.js";
import { tool$resourcesAddResourceNhi } from "./tools/resourcesAddResourceNhi.js";
import { tool$resourcesAddResourceUser } from "./tools/resourcesAddResourceUser.js";
import { tool$resourcesCreateResource } from "./tools/resourcesCreateResource.js";
import { tool$resourcesDeleteResource } from "./tools/resourcesDeleteResource.js";
import { tool$resourcesDeleteResourceNhi } from "./tools/resourcesDeleteResourceNhi.js";
import { tool$resourcesDeleteResourceUser } from "./tools/resourcesDeleteResourceUser.js";
import { tool$resourcesGetResource } from "./tools/resourcesGetResource.js";
import { tool$resourcesGetResourceMessageChannels } from "./tools/resourcesGetResourceMessageChannels.js";
import { tool$resourcesGetResourceNhis } from "./tools/resourcesGetResourceNhis.js";
import { tool$resourcesGetResourceReviewers } from "./tools/resourcesGetResourceReviewers.js";
import { tool$resourcesGetResourceReviewerStages } from "./tools/resourcesGetResourceReviewerStages.js";
import { tool$resourcesGetResources } from "./tools/resourcesGetResources.js";
import { tool$resourcesGetResourceScopedRolePermissions } from "./tools/resourcesGetResourceScopedRolePermissions.js";
import { tool$resourcesGetResourceTags } from "./tools/resourcesGetResourceTags.js";
import { tool$resourcesGetResourceUser } from "./tools/resourcesGetResourceUser.js";
import { tool$resourcesGetResourceUsers } from "./tools/resourcesGetResourceUsers.js";
import { tool$resourcesGetResourceVisibility } from "./tools/resourcesGetResourceVisibility.js";
import { tool$resourcesResourceUserAccessStatusRetrieve } from "./tools/resourcesResourceUserAccessStatusRetrieve.js";
import { tool$resourcesSetResourceMessageChannels } from "./tools/resourcesSetResourceMessageChannels.js";
import { tool$resourcesSetResourceReviewers } from "./tools/resourcesSetResourceReviewers.js";
import { tool$resourcesSetResourceReviewerStages } from "./tools/resourcesSetResourceReviewerStages.js";
import { tool$resourcesSetResourceScopedRolePermissions } from "./tools/resourcesSetResourceScopedRolePermissions.js";
import { tool$resourcesSetResourceVisibility } from "./tools/resourcesSetResourceVisibility.js";
import { tool$resourcesUpdateResources } from "./tools/resourcesUpdateResources.js";
import { tool$resourcesUpdateResourceUser } from "./tools/resourcesUpdateResourceUser.js";
import { tool$sessionsSessions } from "./tools/sessionsSessions.js";
import { tool$tagsAddGroupTag } from "./tools/tagsAddGroupTag.js";
import { tool$tagsAddResourceTag } from "./tools/tagsAddResourceTag.js";
import { tool$tagsAddUserTag } from "./tools/tagsAddUserTag.js";
import { tool$tagsCreateTag } from "./tools/tagsCreateTag.js";
import { tool$tagsDeleteTagByID } from "./tools/tagsDeleteTagByID.js";
import { tool$tagsGetTag } from "./tools/tagsGetTag.js";
import { tool$tagsGetTagByID } from "./tools/tagsGetTagByID.js";
import { tool$tagsGetTags } from "./tools/tagsGetTags.js";
import { tool$tagsRemoveGroupTag } from "./tools/tagsRemoveGroupTag.js";
import { tool$tagsRemoveResourceTag } from "./tools/tagsRemoveResourceTag.js";
import { tool$tagsRemoveUserTag } from "./tools/tagsRemoveUserTag.js";
import { tool$uarsCreateUar } from "./tools/uarsCreateUar.js";
import { tool$uarsGetUar } from "./tools/uarsGetUar.js";
import { tool$uarsGetUARs } from "./tools/uarsGetUARs.js";
import { tool$usersGetRemoteUsers } from "./tools/usersGetRemoteUsers.js";
import { tool$usersGetUsers } from "./tools/usersGetUsers.js";
import { tool$usersGetUserTags } from "./tools/usersGetUserTags.js";
import { tool$usersUser } from "./tools/usersUser.js";

export function createMCPServer(deps: {
  logger: ConsoleLogger;
  allowedTools?: string[] | undefined;
  scopes?: MCPScope[] | undefined;
  serverURL?: string | undefined;
  bearerAuth?: SDKOptions["bearerAuth"] | undefined;
  serverIdx?: SDKOptions["serverIdx"] | undefined;
}) {
  const server = new McpServer({
    name: "OpalMcp",
    version: "0.7.1",
  });

  const client = new OpalMcpCore({
    bearerAuth: deps.bearerAuth,
    serverURL: deps.serverURL,
    serverIdx: deps.serverIdx,
  });

  const scopes = new Set(deps.scopes);

  const allowedTools = deps.allowedTools && new Set(deps.allowedTools);
  const tool = createRegisterTool(
    deps.logger,
    server,
    client,
    scopes,
    allowedTools,
  );
  const resource = createRegisterResource(deps.logger, server, client, scopes);
  const resourceTemplate = createRegisterResourceTemplate(
    deps.logger,
    server,
    client,
    scopes,
  );
  const prompt = createRegisterPrompt(deps.logger, server, client, scopes);
  const register = { tool, resource, resourceTemplate, prompt };
  void register; // suppress unused warnings

  tool(tool$appsGetApps);
  tool(tool$appsGetApp);
  tool(tool$appsGetSyncErrors);
  tool(tool$bundlesGetBundles);
  tool(tool$bundlesCreateBundle);
  tool(tool$bundlesGetBundle);
  tool(tool$bundlesDeleteBundle);
  tool(tool$bundlesUpdateBundle);
  tool(tool$bundlesGetBundleResources);
  tool(tool$bundlesAddBundleResource);
  tool(tool$bundlesRemoveBundleResource);
  tool(tool$bundlesGetBundleGroups);
  tool(tool$bundlesAddBundleGroup);
  tool(tool$bundlesRemoveBundleGroup);
  tool(tool$bundlesGetBundleVisibility);
  tool(tool$bundlesSetBundleVisibility);
  tool(tool$configurationTemplatesGetConfigurationTemplates);
  tool(tool$configurationTemplatesCreateConfigurationTemplate);
  tool(tool$configurationTemplatesUpdateConfigurationTemplate);
  tool(tool$configurationTemplatesDeleteConfigurationTemplate);
  tool(tool$eventsEvents);
  tool(tool$groupsGetGroups);
  tool(tool$groupsUpdateGroups);
  tool(tool$groupsCreateGroup);
  tool(tool$groupsGetGroup);
  tool(tool$groupsDeleteGroup);
  tool(tool$groupsGetGroupMessageChannels);
  tool(tool$groupsSetGroupMessageChannels);
  tool(tool$groupsGetGroupOnCallSchedules);
  tool(tool$groupsSetGroupOnCallSchedules);
  tool(tool$groupsGetGroupResources);
  tool(tool$groupsSetGroupResources);
  tool(tool$groupsGetGroupContainingGroups);
  tool(tool$groupsAddGroupContainingGroup);
  tool(tool$groupsGetGroupContainingGroup);
  tool(tool$groupsRemoveGroupContainingGroup);
  tool(tool$groupsAddGroupResource);
  tool(tool$groupsGetGroupVisibility);
  tool(tool$groupsSetGroupVisibility);
  tool(tool$groupsGetGroupReviewers);
  tool(tool$groupsSetGroupReviewers);
  tool(tool$groupsGetGroupReviewerStages);
  tool(tool$groupsSetGroupReviewerStages);
  tool(tool$groupsGetGroupTags);
  tool(tool$groupsGetGroupUsers);
  tool(tool$groupsUpdateGroupUser);
  tool(tool$groupsAddGroupUser);
  tool(tool$groupsDeleteGroupUser);
  tool(tool$groupBindingsGetGroupBindings);
  tool(tool$groupBindingsCreateGroupBinding);
  tool(tool$groupBindingsUpdateGroupBindings);
  tool(tool$groupBindingsGetGroupBinding);
  tool(tool$groupBindingsDeleteGroupBinding);
  tool(tool$idpGroupMappingsGetIdpGroupMappings);
  tool(tool$idpGroupMappingsUpdateIdpGroupMappings);
  tool(tool$idpGroupMappingsDeleteIdpGroupMappings);
  tool(tool$ownersGetOwners);
  tool(tool$ownersCreateOwner);
  tool(tool$ownersUpdateOwners);
  tool(tool$ownersGetOwner);
  tool(tool$ownersDeleteOwner);
  tool(tool$ownersGetOwnerFromName);
  tool(tool$ownersGetOwnerUsers);
  tool(tool$ownersSetOwnerUsers);
  tool(tool$requestsGetRequests);
  tool(tool$requestsCreateRequest);
  tool(tool$requestsGetRequestsRelay);
  tool(tool$requestsGetRequest);
  tool(tool$requestsApproveRequest);
  tool(tool$resourcesGetResources);
  tool(tool$resourcesUpdateResources);
  tool(tool$resourcesCreateResource);
  tool(tool$resourcesGetResource);
  tool(tool$resourcesDeleteResource);
  tool(tool$resourcesGetResourceMessageChannels);
  tool(tool$resourcesSetResourceMessageChannels);
  tool(tool$resourcesGetResourceVisibility);
  tool(tool$resourcesSetResourceVisibility);
  tool(tool$resourcesGetResourceReviewers);
  tool(tool$resourcesSetResourceReviewers);
  tool(tool$resourcesGetResourceReviewerStages);
  tool(tool$resourcesSetResourceReviewerStages);
  tool(tool$resourcesGetResourceNhis);
  tool(tool$resourcesGetResourceUsers);
  tool(tool$resourcesAddResourceNhi);
  tool(tool$resourcesDeleteResourceNhi);
  tool(tool$resourcesAddResourceUser);
  tool(tool$resourcesUpdateResourceUser);
  tool(tool$resourcesDeleteResourceUser);
  tool(tool$resourcesGetResourceUser);
  tool(tool$resourcesResourceUserAccessStatusRetrieve);
  tool(tool$resourcesGetResourceTags);
  tool(tool$resourcesGetResourceScopedRolePermissions);
  tool(tool$resourcesSetResourceScopedRolePermissions);
  tool(tool$nonHumanIdentitiesGetNhis);
  tool(tool$sessionsSessions);
  tool(tool$usersUser);
  tool(tool$usersGetUsers);
  tool(tool$usersGetRemoteUsers);
  tool(tool$usersGetUserTags);
  tool(tool$accessRulesCreateAccessRule);
  tool(tool$accessRulesGetAccessRule);
  tool(tool$accessRulesUpdateAccessRule);
  tool(tool$tagsGetTagByID);
  tool(tool$tagsDeleteTagByID);
  tool(tool$tagsGetTag);
  tool(tool$tagsCreateTag);
  tool(tool$tagsGetTags);
  tool(tool$tagsAddUserTag);
  tool(tool$tagsRemoveUserTag);
  tool(tool$tagsAddGroupTag);
  tool(tool$tagsRemoveGroupTag);
  tool(tool$tagsAddResourceTag);
  tool(tool$tagsRemoveResourceTag);
  tool(tool$messageChannelsGetMessageChannels);
  tool(tool$messageChannelsCreateMessageChannel);
  tool(tool$messageChannelsGetMessageChannel);
  tool(tool$onCallSchedulesGetOnCallSchedules);
  tool(tool$onCallSchedulesCreateOnCallSchedule);
  tool(tool$onCallSchedulesGetOnCallSchedule);
  tool(tool$uarsGetUARs);
  tool(tool$uarsCreateUar);
  tool(tool$uarsGetUar);

  return server;
}
